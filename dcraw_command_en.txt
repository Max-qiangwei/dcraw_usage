### **dcraw Usage Documentation**

#### **Basic Functionality and Parameters**
1. **Input and Output Control**
   - **`-v`**  
     Enable verbose mode to display detailed processing information (e.g., file loading, white balance parameters, interpolation algorithms).
   
   - **`-T`**  
     Output in TIFF format (default is PPM).

   - **`-e`**  
     Extract the embedded JPEG thumbnail from the RAW file (generated by the camera).

   - **`-i`**  
     Only identify file information (no decoding).

   - **`-i -v`**  
     Display file metadata (e.g., camera model, capture time, ISO, aperture).

---

2. **Image Processing Modes**
   - **`-4`**  
     Generate a 16-bit linear TIFF file without gamma correction, preserving the linear relationship of the original sensor data. Equivalent to `-6 -W -g 1 1`.
     
   - **`-D`**  
     Output the demosaiced raw Bayer data (grayscale image), suitable for manual CFA (Color Filter Array) processing.
     
   - **`-d`**  
     Output demosaiced but linearized images (adjusted for black point, white balance, and scaling).

---

3. **White Balance Adjustment**
   - **`-w`**  
     Use the original white balance parameters recorded by the camera (if available).
     
   - **`-a`**  
     Calculate automatic white balance based on the entire image.
     
   - **`-r <r g b g>`**  
     Custom white balance multipliers (scaling factors for R, G, B, G channels in order). For example, `-r 1 1 1 1` means no white balance adjustment.
      (ps: Usually it is this pattern, but some cameras may have different patterns or even not 2*2 patterns.)
---

4. **Highlight and Shadow Processing**
   - **`-H [0-9]`**  
     Set highlight recovery mode:
     - `0`: Clip highlights (default)  
     - `1`: Preserve highlight details (no clipping)  
     - `2`: Set overexposed areas to neutral gray  
     - `3-9`: Complex highlight recovery algorithms (slower).
     
   - **`-k <num>`**  
     Set the black point (shadow) threshold.
     
   - **`-S <num>`**  
     Set the saturation threshold.

---

5. **Demosaicing and Color Management**
   - **`-q [0-3]`**  
     Select demosaicing algorithm quality:
     - `0`: Bilinear interpolation (fastest)  
     - `1`: VNG (Variable Number of Gradients)  
     - `2`: PPG (Patterned Pixel Grouping)  
     - `3`: AHD (Adaptive Homogeneity-Directed, highest quality).
     
   - **`-o [0-5]`**  
     Set output color space:
     - `0`: No color management (preserve raw data)  
     - `1`: sRGB  
     - `2`: Adobe RGB  
     - `3`: Wide Gamut  
     - `4`: ProPhoto RGB  
     - `5`: XYZ.

---

6. **Gamma Correction and Curves**
   - **`-g <gamma> <slope>`**  
     Set gamma curve. For example:
     - `-g 1 1`: Linear gamma (default with `-4`)  
     - `-g 2.2 0`: Standard Adobe RGB gamma  
     - `-g 2.4 12.9`: sRGB gamma.

---

7. **Advanced Features**
   - **`-P <file>`**  
     Fix bad pixels using the specified file.
     
   - **`-K <file>`**  
     Subtract a dark frame (requires a 16-bit RAW PGM file).
     
   - **`-C <r b>`**  
     Correct chromatic aberration (horizontal and vertical compensation).
     
   - **`-t [0-7]`**  
     Rotate the image (e.g., `-t 3` rotates 180 degrees).

---
